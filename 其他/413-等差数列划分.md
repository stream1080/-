# 413-等差数列划分

![](https://github.com/stream1080/leetcode/blob/main/其他/413-1.png)

如果一个数列 至少有三个元素 ，并且任意两个相邻元素之差相同，则称该数列为等差数列。

例如，[1,3,5,7,9]、[7,7,7,7] 和 [3,-1,-5,-9] 都是等差数列。
给你一个整数数组 nums ，返回数组 nums 中所有为等差数组的子数组个数。

子数组是数组中的一个连续序列。

 

示例 1：

```java
输入：nums = [1,2,3,4]
输出：3
解释：nums 中有三个子等差数组：[1, 2, 3]、[2, 3, 4] 和 [1,2,3,4] 自身。
示例 2：

输入：nums = [1]
输出：0
 
```
提示：
- 1 <= nums.length <= 5000
- -1000 <= nums[i] <= 1000


## 思路
找规律,从小的例子出发,仔细观察,会发现当整个数组为(1, 2, 3, 4, 5, 6)的时候,我们先取出前三个,
(1, 2, 3)的等差数列的个数为1,
(1, 2, 3, 4)的等差数列的个数为3,
(1, 2, 3, 4, 5)的等差数列的个数为6,
(1, 2, 3, 4, 5, 6)的等差数列个数为10,
以此类推我们可以很容易的发现在一个等差数列中加入一个数字,如果还保持着等差数列的特性,每次的增量都会加1,如果刚加进来的数字与原先的序列构不成等差数列,就将增量置为0,接下来继续循环,执行以上的逻辑即可

## 参考代码
```Java
class Solution {
    public int numberOfArithmeticSlices(int[] nums) {
        //处理边界条件
        if(nums.length<2 || nums == null)
            return 0;
        int res = 0,add = 0;
        //i从2开始遍历
        for(int i=2;i<nums.length;i++){
            //等差数列特性：3-2 = 2-1
            if(nums[i-1]-nums[i-2] == nums[i]-nums[i-1])
                res += ++add;//如果是等差数列，增量add+1
            else 
                add = 0;
        }
        return res;
    }
}
```
